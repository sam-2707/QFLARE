# QFLARE Certificate Manager
FROM alpine:3.18

RUN apk add --no-cache openssl

WORKDIR /app

COPY scripts/generate_certs.sh /app/generate_certs.sh
RUN chmod +x /app/generate_certs.sh

# Create certificates directory
RUN mkdir -p /certs

# Set environment variables with defaults
ENV CERT_VALIDITY_DAYS=365
ENV CA_KEY_SIZE=4096  
ENV SERVER_KEY_SIZE=2048

VOLUME ["/certs"]

CMD ["/app/generate_certs.sh"]